
# Terraform Variables Guide

This document explains **all Terraform variables used in your provided configuration**, including strings, numbers, booleans, lists, maps, tuples, and objects ‚Äî with clear explanations and examples.

---

# üîπ 1. String Variable

A **string** represents plain text.

```terraform
variable "vpcname" {
  type    = string
  default = "myvpc"
}
```

### Usage
```terraform
tags = {
  Name = var.vpcname
}
```

---

# üîπ 2. Number Variable

A **number** can be an integer or float.

```terraform
variable "sshport" {
  type    = number
  default = 22
}
```

### Usage
Used for:
- Ports
- Counts
- Resource sizing

---

# üîπ 3. Boolean Variable

A boolean represents **true** or **false**.

```terraform
variable "enabled" {
  default = true
}
```

### Usage
```terraform
enable_dns_support = var.enabled
```

---

# üîπ 4. List Variable

A **list** is an ordered collection of values.

```terraform
variable "mylist" {
  type    = list(string)
  default = ["Value1", "Value2"]
}
```

### Usage
```terraform
element(var.mylist, 0)
```

---

# üîπ 5. Map Variable

A **map** is a key/value dictionary.

```terraform
variable "mymap" {
  type = map
  default = {
    Key1 = "Value1"
    Key2 = "Value2"
  }
}
```

### Usage
```terraform
var.mymap["Key1"]
```

---

# üîπ 6. Input Variable (No Default)

This variable **must be provided** at runtime.

```terraform
variable "inputname" {
  type        = string
  description = "Set the name of the VPC"
}
```

### Usage
You must provide this in:
- `terraform.tfvars`
- CLI
- or var-file

Example:

```terraform
inputname = "production-vpc"
```

---

# üîπ 7. Tuple Variable

A tuple contains **ordered values of mixed types**.

```terraform
variable "mytuple" {
  type    = tuple([string, number, string])
  default = ["cat", 1, "dog"]
}
```

### Usage
```terraform
var.mytuple[0] # "cat"
var.mytuple[1] # 1
```

---

# üîπ 8. Object Variable

An object is a **structured set of attributes** with defined types.

```terraform
variable "myobject" {
  type = object({ 
      name = string, 
      port = list(number) 
  })
  default = {
    name = "TJ"
    port = [22, 25, 80]
  }
}
```

### Usage
```terraform
var.myobject.name
var.myobject.port[0]
```

---

# AWS Resource Definition Using Variables

Your VPC resource uses the variable `inputname` to dynamically set the VPC name.

```terraform
resource "aws_vpc" "myvpc" {
  cidr_block = "10.0.0.0/16"

  tags = {
    Name = var.inputname
  }
}
```

---

# Output Example

Outputs allow Terraform to show values after apply.

```terraform
output "vpcid" {
  value = aws_vpc.myvpc.id
}
```

Usage:

```bash
terraform output
```

---

## Summary of Variable Types Used

| Variable      | Type            | Example Use |
|---------------|-----------------|-------------|
| `vpcname`     | string          | Naming resources |
| `sshport`     | number          | Port configuration |
| `enabled`     | boolean         | Feature toggles |
| `mylist`      | list(string)    | Multiple values |
| `mymap`       | map             | Lookup tables |
| `inputname`   | string (input)  | User-provided names |
| `mytuple`     | tuple           | Mixed-type sequences |
| `myobject`    | object          | Structured config |



# AWS Resource Definition Using Variables

Your VPC resource uses the variable `inputname` to dynamically set the VPC name.

```terraform
resource "aws_vpc" "myvpc" {
  cidr_block = "10.0.0.0/16"

  tags = {
    Name = var.inputname
  }
}
```

---

# Output Example

Outputs allow Terraform to show values after apply.

```terraform
output "vpcid" {
  value = aws_vpc.myvpc.id
}
```

Usage:

```bash
terraform output
```

---

## Summary of Variable Types Used

| Variable      | Type            | Example Use |
|---------------|-----------------|-------------|
| `vpcname`     | string          | Naming resources |
| `sshport`     | number          | Port configuration |
| `enabled`     | boolean         | Feature toggles |
| `mylist`      | list(string)    | Multiple values |
| `mymap`       | map             | Lookup tables |
| `inputname`   | string (input)  | User-provided names |
| `mytuple`     | tuple           | Mixed-type sequences |
| `myobject`    | object          | Structured config |

---

# Terraform Examples for `count`, `for_each`, and Conditional Resources

### 1. Count Example
This only works on legacy systems. On current versions use For Each. 
**‚≠ê Provided Example**
```
provider "aws" {
    region = "eu-west-2"
}
module "ec2" {
    source = "./ec2"
    count  = 3
}
```

---

### 2. For_Each Example

**‚≠ê Provided Example**
```
provider "aws" {
    region = "eu-west-2"
}
module "ec2" {
    source   = "./ec2"
    for_each = toset(["dev", "test", "prod"])
}
```

---

### 3. Conditional Count (‚ÄúSwitch Feature‚Äù)

**‚≠ê Provided Example**
```
provider "aws" {
    region = "eu-west-2"
}
variable "environment" {
    type = string
}
resource "aws_instance" "ec2" {
    count = var.environment == "prod" ? 5 : 1 
    # other resource config
}
```

`count = var.environment == "prod" ? 5 : 1 ` This is a tertianary operator. 

In order to run this you need to use one of these input files. 

**‚≠ê prod.tfvars**
```hcl
number_of_servers = 50
environment       = "prod"
```

**‚≠ê test.tfvars**
```hcl
number_of_servers = 2
environment       = "test"
```
` terraform plan -var-file =  prod.tfvars   ` for example. 

---
