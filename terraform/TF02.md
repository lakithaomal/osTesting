
# Creating VPCs

## Understanding `main.tf`

```
#  Provider Configuration 
# This can be used to configure the AWS provider, AZURe provider, GCP provider, and so on.
# More information about provider configuration can be found here:
# https://registry.terraform.io/providers/hashicorp/aws/latest/docs#configuration

provider "aws" {
    region = "us-west-2"
}

# Resource Definition
# This block defines an AWS VPC resource with a specified CIDR block.
# More information about AWS VPC resource can be found here:
# https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/vpc

# Create an AWS VPC with a CIDR block of 10.0.0.0/16    
#  my_first_vpc is the name given to this resource instance.
resource "aws_vpc" "my_first_vpc" {
    cidr_block = "10.0.0.0/16"
}
```

The `main.tf` file is the primary Terraform configuration file. It defines **which cloud provider Terraform should use** and **what resources should be created**.

Below is a breakdown of the example:

---

### ✔️ Provider Configuration

```terraform
provider "aws" {
    region = "us-west-2"
}
```

This block tells Terraform:

- Use the **AWS provider**
- Deploy resources into the **us-west-2** region (Oregon)

Terraform can work with many providers:
- AWS  
- Azure  
- Google Cloud  
- Kubernetes  
- GitHub  
- Cloudflare  
and more.

The provider block initializes AWS-specific functionality so Terraform knows how to create AWS resources.

---

### ✔️ Resource Definition: AWS VPC

```terraform
resource "aws_vpc" "my_first_vpc" {
    cidr_block = "10.0.0.0/16"
}
```

This block defines an AWS **VPC (Virtual Private Cloud)** resource.

- `aws_vpc` → the AWS VPC resource type  
- `"my_first_vpc"` → the name of this resource instance inside Terraform  
- `cidr_block` → the IP address range for the VPC

`10.0.0.0/16` means:
- The VPC will have **65,536 IP addresses**
- Subnets created later must fall inside this range

Terraform will create this VPC when you run:

```
terraform apply
```

Terraform will also track the resource in `terraform.tfstate`, allowing it to manage updates and deletions over time.

---

### ✔️ Summary


- **Provider block** = Which cloud platform Terraform talks to  
- **Resource block** = What infrastructure Terraform creates  
- `main.tf` = Central file that defines your infrastructure as code

## Checking Your Created VPC in AWS

After running `terraform apply`, Terraform will output something like:

```
aws_vpc.my_first_vpc: Creation complete after 3s [id=vpc-xxxxxxxxxxxxxxxxx]
```

To verify that the VPC was successfully created, you can check it in multiple ways:

### ✔️ 1. Check in AWS Console (GUI)
1. Go to **AWS Console**
2. Navigate to **VPC → Your VPCs**
3. Search for the VPC ID Terraform printed, for example:

```
vpc-0101082101f52479f
```

You should see:
- The VPC ID  
- CIDR block (e.g., 10.0.0.0/16)  
- State = *available*

---

### ✔️ 2. Check Using AWS CLI
Run:

```bash
aws ec2 describe-vpcs --vpc-ids <your_vpc_id> --region us-west-2
```

Example:

```bash
aws ec2 describe-vpcs --vpc-ids vpc-0101082101f52479f --region us-west-2
```

If the VPC exists, you will see JSON output with VPC details.

---

### ✔️ 3. Check Using Terraform State
Terraform tracks resources it creates in a state file.

List resources tracked by Terraform:

```bash
terraform state list
```

Inspect details of your VPC:

```bash
terraform state show aws_vpc.my_first_vpc
```

---

### ✔️ 4. (Optional) Add Terraform Output for Easy Access
Add this to your Terraform file:

```terraform
output "vpc_id" {
  value = aws_vpc.my_first_vpc.id
}
```

Then run:

```bash
terraform output
```

You will see:

```
vpc_id = "vpc-xxxxxxxxxxxxxxxxx"
```

---


---



